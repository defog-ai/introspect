(()=>{var t={6485:(t,e,r)=>{"use strict";var n,o;t.exports=(null==(n=r.g.process)?void 0:n.env)&&"object"==typeof(null==(o=r.g.process)?void 0:o.env)?r.g.process:r(7032)},7032:t=>{!function(){var e={229:function(t){var e,r,n,o=t.exports={};function i(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function c(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var a=[],u=!1,l=-1;function f(){u&&n&&(u=!1,n.length?a=n.concat(a):l=-1,a.length&&p())}function p(){if(!u){var t=c(f);u=!0;for(var e=a.length;e;){for(n=a,a=[];++l<e;)n&&n[l].run();l=-1,e=a.length}n=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function h(t,e){this.fun=t,this.array=e}function d(){}o.nextTick=function(t){var e=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];a.push(new h(t,e)),1!==a.length||u||c(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=d,o.addListener=d,o.once=d,o.off=d,o.removeListener=d,o.removeAllListeners=d,o.emit=d,o.prependListener=d,o.prependOnceListener=d,o.listeners=function(t){return[]},o.binding=function(t){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},r={};function n(t){var o=r[t];if(void 0!==o)return o.exports;var i=r[t]={exports:{}},s=!0;try{e[t](i,i.exports,n),s=!1}finally{s&&delete r[t]}return i.exports}n.ab="//";var o=n(229);t.exports=o}()}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}},s=!0;try{t[n](i,i.exports,r),s=!1}finally{s&&delete e[n]}return i.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{"use strict";var t=r(6485);let e=(e,r)=>{if("http"!==e&&"ws"!==e)throw Error("Protocol not supported");return""!==r?"ws"===e?"".concat((t.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"").replace("http","ws"),"/").concat(r):"".concat(t.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"","/").concat(r):"".concat(t.env.NEXT_PUBLIC_AGENTS_ENDPOINT||"")};async function n(t,r,n){let o=await fetch(e("http","upload_file_as_db"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,file_name:r,base64_content:n})});if(!o.ok)throw Error("Failed to upload file - are you sure your network is working?");let i=await o.json();return{dbName:i.db_name,dbInfo:i.db_info}}self.onmessage=async t=>{let{type:e,token:r,fileName:o,fileBuffer:i}=t.data;if(console.log("Worker event",t.data),"UPLOAD_FILE"===e)try{let t=function(t){let e="",r=new Uint8Array(t),n=r.byteLength;for(let t=0;t<n;t++)e+=String.fromCharCode(r[t]);return self.btoa(e)}(i),{dbName:e,dbInfo:s}=await n(r,o,t);self.postMessage({type:"UPLOAD_SUCCESS",dbName:e,dbInfo:s})}catch(e){let t={type:"UPLOAD_ERROR",error:e instanceof Error?e.message:String(e)};self.postMessage(t)}}})(),_N_E={}})();